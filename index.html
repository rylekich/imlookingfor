<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>i'm looking for...</title>
</head>
<body>
    <main>
        <header>
            <nav>
                <div class="nav-link"><a href="">about</a></div>
                <h1>I'm looking for...</h1>
                <div class="nav-link"><a href="https://docs.google.com/forms/d/e/1FAIpQLScubqktVRJgarFkZlDHZNBTv2FiT570SXuylHOjmCznmy71Rg/viewform">submit</a></div>
            </nav>
            <div id="nav-filters">
                <input type="checkbox" id="filter-She" name="filter-She" checked="">
                <label for="filter-She">She/Her</label>
                <input type="checkbox" id="filter-He" name="filter-He" checked="">
                <label for="filter-He">He/Him</label>
                <input type="checkbox" id="filter-They" name="filter-They" checked="">
                <label for="filter-They">They/Them</label>
                <input type="checkbox" id="filter-Gay" name="filter-Gay" checked="">
                <label for="filter-Gay">Gay</label>
                <input type="checkbox" id="filter-Lesbian" name="filter-Lesbian" checked="">
                <label for="filter-Lesbian">Lesbian</label>
                <input type="checkbox" id="filter-Queer" name="filter-Queer" checked="">
                <label for="filter-Queer">Queer</label>
                <input type="checkbox" id="filter-Bisexual" name="filter-Bisexual" checked="">
                <label for="filter-Bisexual">Bisexual</label>
                <input type="checkbox" id="filter-Straight" name="filter-Straight" checked="">
                <label for="filter-Straight">Straight</label>
                <input type="checkbox" id="filter-Available" name="filter-Available" checked="">
                <label for="filter-Available">Available</label>
                <input type="checkbox" id="filter-Taken" name="filter-Taken" checked="">
                <label for="filter-Taken">Taken</label>                
            </div>
        </header>

        <!-- <section id="about">
            <div class="exit">x</div>
            <p>This is sophies about section. This is sophies about section. This is sophies about section. This is sophies about section.</p>
        </section> -->
        

         <section id="people" class="profiles">

         </section>

    </main>


        <script>

              //Filtering Checkboxes Code
              document.addEventListener('DOMContentLoaded', function() {
                    const toggleCheckbox = document.getElementById('nav-filters');
                    const divsToToggle = document.querySelectorAll('.Bi, .Taken, .Gay'); // Select all divs with these classes

                    toggleCheckbox.addEventListener('change', function() {
                        if (this.checked) {
                        divsToToggle.forEach(div => {
                            div.style.display = 'block'; // Or 'flex', 'grid', etc., depending on desired layout
                        });
                        } else {
                        divsToToggle.forEach(div => {
                            div.style.display = 'none';
                        });
                        }
                    });
                });

            const API =
              "https://script.google.com/macros/s/AKfycbyhEg9C9MATypfeNQWdjZXoZznzg-RJHSC6n3J_J6xF7F1UglXf1mSongSI1F9OI2c_-w/exec";
      
            // // Mapping of profile types to their corresponding section IDs
            // const TYPE_TO_SECTION = {
            //   all: "profiles"
            // };
      
            // Create profile card element
            function createProfileCard(row) {
              const div = document.createElement("div");
              div.className = `profile-card ${row.Orientations} ${row.Availability}`;
      
              const template = [
                ["img", { src: row.Photo }],
                ["p", { className: "profile-name", textContent: row.Name }],
                ["p", { className: "profile-age", textContent: row.Age }],
                ["p", { className: "profile-orientation", textContent: row.Orientation }],
                ["p", { className: "profile-pronoun", textContent: row.Pronoun }],
                ["p", { className: "profile-seeking",  textContent: `I'm looking for... ${row["profile-seeking"]}`, }, ],
                ["p", { className: "profile-availibility", textContent: row.Availability }],
                ["p", { className: "profile-contact", textContent: `Email â†’ ${row["Contact"]}`, }, ],
              ];
              
      
              for (const [tag, props] of template) {
                const el = document.createElement(tag);
                Object.assign(el, props);
                div.appendChild(el);
              }
      
              return div;
            }
      
            // // Organize profiles into section
            // function organizeItemsByType() {
            //   for (const [type, sectionId] of Object.entries(TYPE_TO_SECTION)) {
            //     const section = document.getElementById(sectionId);
            //     if (!section) continue;
      
            //     const items = document.querySelectorAll(`.item.${type}`);
            //     for (const item of items) {
            //       section.appendChild(item);
            //     }
            //   }
            // }
      
            // Main
            fetch(API)
              .then((res) => res.json())
              .then(({ data }) => {
                const container = document.querySelector(".profiles");
                const fragment = document.createDocumentFragment();
      
                for (const row of data[0].children) {
                  fragment.appendChild(createProfileCard(row));
                }
      
                container.appendChild(fragment);
                // organizeItemsByType();
              })
              .catch((err) => console.error("Error fetching API:", err));



              
          </script>

</body>
</html>